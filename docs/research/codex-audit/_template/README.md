# 改善調査ログ（{{DATE}}）

## 目次
- [改善調査サマリ（{{DATE}}）](./{{DATE}}_summary.md)
- [リスク一覧（{{DATE}}）](./{{DATE}}_risks.md)
- [改善計画（10件・優先順）（{{DATE}}）](./{{DATE}}_plan-10.md)
- [付録（{{DATE}}）](./{{DATE}}_appendix.md)
- [改善対応トラッカー](./improvement-tracker.md)

## 調査の観点
- Interaction（`deferReply`/`editReply`/`followUp`、二重応答、タイムアウト、編集競合）
- Rate limit / スパム耐性（429時の扱い、送信頻度、バースト、キュー/間引き）
- 並行性（同時実行、二重クリック、二重登録、排他が必要な箇所）
- DB/永続化（整合性、再起動時、ジョブ/タスク、マイグレーション）
- ロギング/監視（ログ設計、エラー分類、再試行、通知の必要性）
- 権限/セキュリティ（権限判定、入力チェック、秘密情報、依存関係更新）
- Sapphire設計（責務分離、共通化、構造、拡張しやすさ）
- DX（Lint/format/CI、README、デバッグ手順、型の厳密さ）

## 更新ルール
- 追加時は `YYYY-MM-DD_*.md` 形式で新規作成する。
- 不明点は `未確認` と明記する。
- `improvement-tracker.md` では、各タスクに `主参照（MD）` と `実装参照（src等）` を必ず記載する。
- `improvement-tracker.md` の `整合性` は `一致` / `MD未記載` / `不一致` で記録する。
- `整合性` が `MD未記載` または `不一致` の場合は、ドキュメント更新タスクを別行で起票する。
