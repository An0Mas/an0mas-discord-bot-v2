# HELP — Discord便利Bot v0.2

> このファイルは /help が表示する文言の正本。
> 一覧の表示順はこのファイルの掲載順を優先する。
> 各コマンドは必ず「概要（1行）」を含める（一覧表示に使用）。

---

## /help
### 概要
コマンドの使い方を一覧・詳細で確認できます（本人のみ表示）。

### 使い方
- `/help`

### 動作
- 一覧（ナンバリング + summary）を表示し、番号ボタンで詳細へ遷移できます。
- 原則 ephemeral（呼び出した本人のみ表示）です。

### 例
- `/help`

---

## /bosyu
### 概要
参加者募集を作成します。ボタンで参加/取消/締切、残り人数の調整ができます。

### 使い方
- `/bosyu`（引数なし：モーダルで入力して作成）
- `/bosyu slots:<number> title:<string> body:<string>`（引数で即時作成）

### 引数
- `slots`：作成者以外に「あと何人参加できるか」
- `title`：募集のタイトル
- `body`：募集内容（改行可）

### モーダル入力（引数なし）
- `slots` / `title` / `body` を入力して送信すると募集を作成します。
- モーダルを閉じた場合は no-op（何も投稿されません）。

### ボタン操作
- `参加`：参加します（満員・参加済みは変化なし）
- `取消`：参加を取り消します（未参加は変化なし）
- `締切`：募集を締め切ります（作成者のみ）
- `再開`：募集を再開します（作成者のみ）
- `＋ / －`：残り人数を増減します（作成者のみ）
- `編集`：タイトル/本文/人数を編集します（作成者のみ）

### 権限
- `締切/再開` と `＋/－` と `編集` は **募集作成者のみ** 実行可能です。

### 注意
- `slots/title/body` を一部だけ指定した場合はエラーになります（no-op：何も投稿されません）。
- 締切中は `参加/取消/＋/－` が無効になります。

### 例
- `/bosyu`
- `/bosyu slots:3 title:周回 body:21:00〜 周回行ける人募集`
- `/bosyu slots:5 title:募集 body:詳細は参加してから共有します`

---

## /bosyu-bpsr
### 概要
BPSR特化のロール別募集を作成します。タンク/アタッカー/ヒーラーを選んで参加できます。

### 使い方
- `/bosyu-bpsr`（引数なし：モーダルで入力して作成）
- `/bosyu-bpsr slots:<number> title:<string> body:<string>`（引数で即時作成）

### 引数
- `slots`：募集人数（自分を含めてあと何人参加できるか）
- `title`：募集のタイトル
- `body`：募集内容（改行可）

### ボタン操作
- `🛡️タンク`：タンクとして参加
- `⚔️アタッカー`：アタッカーとして参加
- `💚ヒーラー`：ヒーラーとして参加
- `取消`：参加を取り消します
- `締切/再開/＋/－/編集`：/bosyu と同じ

### 特徴
- **投稿者は自動参加しません**。自分もボタンでロールを選んで参加します。
- **ロール変更**：別ロールのボタンを押すと自動でロールが切り替わります。

### 権限
- `締切/再開` と `＋/－` と `編集` は **募集作成者のみ** 実行可能です。

### 例
- `/bosyu-bpsr`
- `/bosyu-bpsr slots:4 title:真竜周回 body:21:00〜 タンク募集中`

---

## /remind
### 概要
リマインダーを登録します。指定時刻にDMで通知されます。

### 使い方
- `/remind`（モーダルで入力）

### モーダル入力
- `通知時間`：通知したい時刻（例: `1400`、コロン省略可・全角OK）
- `何分前`：何分前に通知するか（空欄で0＝ちょうど通知）
- `通知内容`：通知時に表示するメッセージ

### 動作
- 今日の指定時刻の N分前 にDMで通知されます。
- 通知後、リマインダーは自動削除されます。
- Bot再起動後もリマインダーは維持されます。

### 注意
- 通知先は**DM**です。BotからのDMを受け取れる設定にしてください。
- 過去の時刻を指定するとエラーになります。

### 例
- `/remind` → モーダルで 時刻:`21:00`, 何分前:`5`, 内容:`周回開始！`

---

## /remind-list
### 概要
自分のリマインダー一覧を表示・削除できます。

### 使い方
- `/remind-list`

### 動作
- 登録済みのリマインダーがナンバリング表示されます。
- 番号ボタンを押すと該当リマインダーを削除できます。
- 削除後、一覧が自動更新されます。

### 例
- `/remind-list`

---

## /dice
### 概要
ダイスロール。指定した形式でダイスを振ります。

### 使い方
- `/dice` — 1d6（6面ダイス1回）
- `/dice expression:2d6` — 6面ダイスを2回振って合計

### 引数
- `expression`：NdM形式（N=個数1〜100, M=面数2〜1000）。省略時 `1d6`

### 動作
- 結果は全員に見える形で表示されます。
- 複数ダイスの場合は各出目と合計を表示します。

### 例
- `/dice` → `🎲 Result: 4`
- `/dice expression:2d6` → `🎲 Result: 3 + 5 = 8`

---

## /allow
### 概要
Bot利用許可を管理します（オーナー専用）。

### 使い方
- `/allow guild add` — このサーバーを許可リストに追加
- `/allow guild remove` — このサーバーを許可リストから削除
- `/allow user add <command> <user>` — ユーザーにコマンド権限を付与
- `/allow user remove <command> <user>` — ユーザーからコマンド権限を削除
- `/allow role add <command> <role>` — ロールにコマンド権限を付与
- `/allow role remove <command> <role>` — ロールからコマンド権限を削除

### 権限
- **Botオーナーのみ**実行可能です。

### 動作
- `guild add`：サーバーを許可リストに追加し、Bot機能を有効化
- `guild remove`：サーバーを許可リストから削除し、Bot機能を無効化
- `user/role add|remove`：特定コマンドのユーザー/ロール別許可を管理

### 例
- `/allow guild add`
- `/allow user add bosyu @ユーザー`
- `/allow role add bosyu @ロール`

---

## /config
### 概要
Bot設定を表示・管理します（オーナー専用）。

### 使い方
- `/config show` — 現在の設定を表示
- `/config permissions` — 全コマンドの権限設定一覧を表示
- `/config permissions command:<コマンド名>` — 特定コマンドの許可ユーザー/ロールを表示

### 表示内容（show）
- Botオーナー
- 現在のサーバーの許可状態
- 許可済みサーバー数

### 表示内容（permissions）
- コマンド別の許可ユーザー数/ロール数
- 詳細指定時は許可ユーザー/ロールのリスト

### 権限
- **Botオーナーのみ**実行可能です。

### 例
- `/config show`
- `/config permissions`
- `/config permissions command:bosyu`

---

## /verify
### 概要
合言葉認証システムを設置します。お知らせに隠した合言葉を入力するとロールが付与されます。

### 使い方
- `/verify keyword:<文言> role:<ロール>` — 認証ボタンを設置

### 引数
- `keyword`：正解の合言葉（必須）
- `role`：認証成功時に付与するロール（必須・選択式）
- `title`：埋め込みのタイトル（任意、デフォルト:「認証」）
- `description`：説明文（任意）

### 動作
1. `/verify` で認証ボタン付きの埋め込みメッセージが投稿されます
2. ユーザーが「✅ 認証する」ボタンをクリックするとモーダルが表示されます
3. 正しい合言葉を入力するとロールが付与されます
4. 間違えても何度でも再試行可能です

### ボタン操作
- `✅ 認証する`：誰でも実行可能
- `⚙️ 編集`：作成者/許可ユーザーのみ（合言葉・タイトル・説明文を変更）
- `🗑️ 削除`：作成者/許可ユーザーのみ

### 仕様
- 大文字/小文字は区別しません
- 反応はすべて本人のみ表示（ephemeral）
- 再試行は無制限

### 権限
- **Botオーナー** または `/allow` で許可されたユーザー/ロールのみ設置/編集/削除可能です。

### 例
- `/verify keyword:ルール確認OK role:@メンバー`
- `/verify keyword:秘密の合言葉 role:@Verified title:認証ボタン description:お知らせを読んで合言葉を入力してください`

---

## /bpsr-role
### 概要
ロール付与ボタンを設置します。タンク/アタッカー/ヒーラーの3つから選択できます。

### 使い方
- `/bpsr-role tank:<ロール> attacker:<ロール> healer:<ロール>`

### 引数
- `tank`：タンクボタンで付与するロール（必須）
- `attacker`：アタッカーボタンで付与するロール（必須）
- `healer`：ヒーラーボタンで付与するロール（必須）
- `title`：タイトル（任意、デフォルト:「ロール選択」）
- `body`：説明文（任意、デフォルト:「メインのジョブを選択してください。」）

### ボタン操作
- `🛡️タンク`：タンクロールを付与/解除
- `⚔️アタッカー`：アタッカーロールを付与/解除
- `💚ヒーラー`：ヒーラーロールを付与/解除

### 動作
- **排他動作**：ボタンを押すと選択したロールが付与され、他2つは自動解除されます
- **トグル**：同じボタンを再度押すとロールが解除されます
- 反応はすべて本人のみ表示（ephemeral）

### 権限
- **Botオーナー** または `/allow` で許可されたユーザー/ロールのみ設置可能です。
- ボタン操作は**全員**が実行可能です。

### 例
- `/bpsr-role tank:@Tank attacker:@Attacker healer:@Healer`
- `/bpsr-role tank:@タンク attacker:@アタッカー healer:@ヒーラー title:ジョブ選択 body:希望のジョブを選んでください`

---

## /mention-reactors
### 概要
リアクションを押した人全員にメンションを送ります。

### 使い方
- `/mention-reactors message:<メッセージIDまたはリンク>`

### 引数
- `message`：対象メッセージのIDまたはリンク（必須）

### 動作
1. コマンド実行 → リアクション一覧がボタンで表示
2. ボタンを押す → そのリアクションを押した人全員にメンション
3. 「全員」ボタン → 全リアクションの人にメンション（重複排除）

### 権限
- **Botオーナー** または `/allow` で許可されたユーザー/ロールのみ

### 例
- `/mention-reactors message:1234567890123456789`
- `/mention-reactors message:https://discord.com/channels/123/456/789`

### メッセージリンクの取得方法
対象メッセージを右クリック →「メッセージリンクをコピー」を選択します。
